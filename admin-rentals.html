<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Console Rentals Admin - Game & Gear</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="frontend/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
</head>
<body class="admin-mode">
  <div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <h1 class="h4 mb-0">Console Rental Admin</h1>
        <small class="text-muted">Manage rental requests</small>
      </div>
      <div class="d-flex gap-2">
        <a class="btn btn-outline-dark btn-sm admin-header-btn" href="admin-panel.html">Back to admin</a>
        <button class="btn btn-danger btn-sm admin-header-btn" onclick="AuthService.logOut()">Logout</button>
      </div>
    </div>
  </div>

  <div id="admin-rentals-root" class="container admin-page"></div>

  <script src="frontend/js/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
  <script src="frontend/utils/constants.js"></script>
  <script src="frontend/utils/auth-service.js"></script>
  <script src="frontend/utils/price.js"></script>
  <script src="frontend/utils/console-rental-admin.js"></script>

  <script>
    const token = localStorage.getItem('user_token');
    if (!token) {
      window.location.href = 'index.html#login';
    }
    try {
      const decoded = jwt_decode(token);
      if (!decoded || !decoded.user || decoded.user.RoleID !== 1) {
        window.location.href = 'index.html#home';
      }
    } catch (e) {
      window.location.href = 'index.html#login';
    }

    fetch('frontend/views/admin-console-rentals.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('admin-rentals-root').innerHTML = html;
        ConsoleRentalAdmin.load();
      });
  </script>
</body>
</html>
